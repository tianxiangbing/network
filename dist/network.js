!function(t,a){"function"==typeof define&&define.amd?define(["$"],a):"object"==typeof exports?module.exports=a():t.Network=a(window.Zepto||window.jQuery||$)}(this,function(t){var a={loadingTpl:'<div class="ui-ajax-loading"><div class="ui-ajax-mask"></div><i></i></div>',get:function(t,a,i,e){"function"==typeof a&&(i=a,a={},e=i||"json"),e=e||"json";var n={url:t,data:a,type:"get",success:i,dataType:e};return this.ajax(n)},post:function(t,a,i,e){"function"==typeof a&&(i=a,a={},e=i||"json"),e=e||"json";var n={url:t,data:a,type:"post",success:i,dataType:e};return this.ajax(n)},ajaxList:{},_key:1,ajax:function(a,i){var e=this,n=t.Deferred();if(i){if(t(i).hasClass("ui-ajaxing"))return n.promise();t(i).addClass("ui-ajaxing")}var o={url:a.url,data:a.data};return a.dataType=a.dataType||"json",e._hasRequest(o.url,o.data)?n.promise():(e._loading(i),e.ajaxList[e._key]=o,e._key++,t.ajax(a).always(function(n){a.oneRequest&&a.oneRequest(n)||(t(i).removeClass("ui-ajaxing"),delete e.ajaxList[e._hasRequest(a.url,a.data)]),e._removeLoading(i)}).fail(function(t){alert("系统出错！可能您需要刷新后再试！")}))},_hasRequest:function(t,a){var i=this;a=i._convertObject(a);for(var e in i.ajaxList){var n=i.ajaxList[e];if(n.url==t&&i._convertObject(n.data)==a)return e}return!1},_convertObject:function(t){if(t&&"object"==typeof t){var a=[];for(var i in t)a.push(i+"="+t[i]);t=a.join("&")}return t},_removeLoading:function(a){var i=t(a||"html"),e=t(i).data("loading");e.remove(),t(i).data("loading",null)},_loading:function(a){var i=this,e=t(a||"html"),n=t(e).data("loading");n||(n=t(i.loadingTpl),t("body").append(n),t(e).data("loading",n));var o=t(e).outerHeight(),d=t(e).outerWidth();a||(o=Math.max(t("html").height(),t(window).height()),d=Math.max(t("html").height(),t(window).width())),console.log(d,o),n.height(o).width(d),n.find("div").height(o).width(d),100>o&&n.find("i").height(o).width(o);var r=t(e).offset();n.css({top:r.top,left:r.left});var s=n.find("i"),u=o,h=d,l=0,f=0;a?(l=(u-s.height())/2,f=(h-s.width())/2):(u=t(window).height(),h=t(window).width(),l=(u-s.height())/2+t(window).scrollTop(),f=(h-s.width())/2+t(window).scrollLeft()),s.css({top:l,left:f})}};return a});