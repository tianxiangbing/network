!function(t,a){"function"==typeof define&&define.amd?define("network",["$"],a):"object"==typeof exports?module.exports=a():t.Network=a(window.Zepto||window.jQuery||$)}(this,function(t){var a={loadingTpl:'<div class="ui-ajax-loading"><div class="ui-ajax-mask"></div><i></i></div>',get:function(t,a,e,i){"function"==typeof a&&(e=a,a={},i=e||"json"),i=i||"json";var n={url:t,data:a,type:"get",success:e,dataType:i};return this.ajax(n)},post:function(t,a,e,i){"function"==typeof a&&(e=a,a={},i=e||"json"),i=i||"json";var n={url:t,data:a,type:"post",success:e,dataType:i};return this.ajax(n)},ajaxList:{},_key:1,ajax:function(a,e){var i=this,n=t.Deferred();if(e){if(t(e).hasClass("ui-ajaxing"))return n.promise();t(e).addClass("ui-ajaxing")}var o={url:a.url,data:a.data};return a.dataType=a.dataType||"json",i._hasRequest(o.url,o.data)?n.promise():(i._loading(e),i.ajaxList[i._key]=o,i._key++,t.ajax(a).always(function(n){a.oneRequest&&a.oneRequest(n)||(t(e).removeClass("ui-ajaxing"),delete i.ajaxList[i._hasRequest(a.url,a.data)]),i._removeLoading(e)}).fail(function(t){alert("系统出错！可能您需要刷新后再试！")}))},_hasRequest:function(t,a){var e=this;a=e._convertObject(a);for(var i in e.ajaxList){var n=e.ajaxList[i];if(n.url==t&&e._convertObject(n.data)==a)return i}return!1},_convertObject:function(t){if(t&&"object"==typeof t){var a=[];for(var e in t)a.push(e+"="+t[e]);t=a.join("&")}return t},_removeLoading:function(a){var e=t(a||"html"),i=t(e).data("loading");i.remove(),t(e).data("loading",null)},_loading:function(a){var e=this,i=t(a||"html"),n=t(i).data("loading");n||(n=t(e.loadingTpl),t("body").append(n),t(i).data("loading",n));var o=t(i).outerHeight(),r=t(i).outerWidth();a||(o=Math.max(t("html").height(),t(window).height()),r=Math.max(t("html").height(),t(window).width())),console.log(r,o),n.height(o).width(r),n.find("div").height(o).width(r),100>o&&n.find("i").height(o).width(o);var s=t(i).offset();n.css({top:s.top,left:s.left});var d=n.find("i"),u=a?o:o+t(window).scrollTop(),l=a?r:r+t(window).scrollLeft(),f=(u-d.height())/2,h=(l-d.width())/2;d.css({top:f,left:h})}};return a});